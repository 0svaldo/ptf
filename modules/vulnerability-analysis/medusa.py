#!/usr/bin/env python
#####################################
# Installation module for MEDUSA
#####################################

# AUTHOR OF MODULE NAME
AUTHOR="Russ Swift (0xsalt)"

# DESCRIPTION OF THE MODULE
DESCRIPTION="This module will install/update Medusa, the Parallel Network Login Auditor. Using older (1.0) version of RDP without PtH support (so far)."

# INSTALL TYPE GIT, SVN, FILE DOWNLOAD
# OPTIONS = GIT, SVN, FILE
INSTALL_TYPE="GIT"

# LOCATION OF THE FILE OR GIT/SVN REPOSITORY
REPOSITORY_LOCATION="https://github.com/jmk-foofus/medusa.git"

# WHERE DO YOU WANT TO INSTALL IT
INSTALL_LOCATION="medusa"

# DEPENDS FOR DEBIAN INSTALLS
DEBIAN="wget,git,build-essential,libpcre3-dev,libssl-dev,libpq5,libpq-dev,libssh2-1,libssh2-1-dev,libsvn-dev,libgnutls-dev,libfreerdp-dev,automake,libfuse2,libfuse-dev,libreadline6,libreadline6-dev,libgcrypt11,libgcrypt11-dev,libgmp10,libgmp-dev,libncurses5,libncurses5-dev"

# COMMANDS TO RUN AFTER
AFTER_COMMANDS="bash ./modules/vulnerability-analysis/install_ncpfs.sh,bash ./modules/vulnerability-analysis/install_afpfs.sh,wget -c http://downloads.sourceforge.net/project/afpfs-ng/afpfs-ng/0.8.1/afpfs-ng-0.8.1.tar.bz2 -O /tmp/afpfs-ng-0.8.1.tar.bz2,tar -xvf /tmp/afpfs-ng-0.8.1.tar.bz2 --directory /tmp/,cd /tmp/afpfs-ng-0.8.1/,./configure,make,sudo make install,sh -c "echo '/usr/include/afpfs-ng' > /etc/ld.so.conf.d/afpfs-ng.conf",mkdir /usr/include/afpfs-ng,cp -v /tmp/afpfs-ng-0.8.1/include/* /usr/include/afpfs-ng/,ln -s /usr/local/lib/libafpclient.so.0.0.0 /usr/lib/libafpclient.so.0,wget -c http://archive.ubuntu.com/ubuntu/pool/universe/n/ncpfs/libncp_2.2.6-8_amd64.deb -O /tmp/libncp_2.2.6-8_amd64.deb,wget -c http://archive.ubuntu.com/ubuntu/pool/universe/n/ncpfs/libncp-dev_2.2.6-8_amd64.deb -O /tmp/libncp-dev_2.2.6-8_amd64.deb,dpkg -i /tmp/libncp_2.2.6-8_amd64.deb,dpkg -i /tmp/libncp-dev_2.2.6-8_amd64.deb,cd {INSTALL_LOCATION},./configure,make,make install"

# THIS WILL CREATE AN AUTOMATIC LAUNCHER FOR THE TOOL
LAUNCHER="medusa"
